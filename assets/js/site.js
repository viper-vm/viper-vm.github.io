document.addEventListener('DOMContentLoaded',()=>{const btn=document.getElementById('themeToggle');const current=localStorage.getItem('theme')||'dark';if(current==='dark')document.documentElement.classList.add('dark');if(btn){btn.addEventListener('click',()=>{document.documentElement.classList.toggle('dark');const d=document.documentElement.classList.contains('dark');localStorage.setItem('theme',d?'dark':'light');});}});async function loadProjects(){const grid=document.getElementById('projects-grid');if(!grid)return;const curated=await fetch('/assets/data/projects.json').then(r=>r.json()).catch(()=>[]);function card(p){return `<div class="card"><div style="display:flex;align-items:center;justify-content:space-between;gap:8px"><h3 style="margin:0"><a href='${p.url}' target='_blank' rel='noreferrer'>${p.name}</a></h3><span class='tag'>${p.lang||p.language||'—'}</span></div><p style='color:var(--muted);margin:6px 0 10px'>${p.description||'—'}</p><div style='font-size:12px;color:var(--muted)'>⭐ ${p.stars ?? p.stargazers_count ?? 0} · Updated ${new Date(p.updated||p.updated_at||Date.now()).toLocaleDateString()}</div></div>`;}curated.forEach(p=>grid.insertAdjacentHTML('beforeend',card(p)));try{const repos=await fetch('https://api.github.com/users/viper-vm/repos?sort=updated&per_page=9').then(r=>r.json());repos.filter(r=>!r.fork).slice(0,9).forEach(r=>grid.insertAdjacentHTML('beforeend',card(r)));}catch(e){}}